import Twitch from '../../utils/twitch'

const Meta = ({ stream: { title, thumbnail_url: avatar_url, display_name } }) => {
	return (
		<div
			className="flex items-center justify-center h-screen bg-opacity-20 bg-repeat"
			style={{
				backgroundColor: '#9146ff',
				backgroundImage: `url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='200px'><text x='15' y='27%' fill='white' font-size='4rem' font-weight='600' opacity='0.1' font-family='Roobert,Helvetica Neue,Helvetica,Arial,sans-serif'>${display_name} ${display_name} ${display_name} ${display_name} ${display_name} ${display_name} ${display_name} ${display_name} </text><text x='5' y='60%' fill='white' font-size='4rem' font-weight='600' opacity='0.1' font-family='Roobert,Helvetica Neue,Helvetica,Arial,sans-serif'>${display_name} ${display_name} ${display_name} ${display_name} ${display_name} ${display_name} ${display_name} ${display_name} ${display_name}</text><text x='0' y='93%' fill='white' font-size='4rem' font-weight='600' opacity='0.1' font-family='Roobert,Helvetica Neue,Helvetica,Arial,sans-serif'>${display_name} ${display_name} ${display_name} ${display_name} ${display_name} ${display_name} ${display_name} ${display_name} ${display_name}</text></svg>")`,
			}}
		>
			<div role="presentation" className="absolute inset-0 pointer-events-none overflow-hidden">
				<div className="absolute top-0 left-0 pt-20 pl-6">
					<svg className="block h-auto text-twitch opacity-60" viewBox="0 0 116 116" xmlns="http://www.w3.org/2000/svg" style={{ width: '20rem' }}>
						<path
							d="M114.74 0a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm-12.61 12.609a1.26 1.26 0 100 2.521 1.26 1.26 0 000-2.521zm0-12.609a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zM89.522 0a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.609a1.26 1.26 0 100 2.521 1.26 1.26 0 000-2.521zm0 12.608a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm-12.609 0a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0-12.608a1.26 1.26 0 100 2.521 1.26 1.26 0 000-2.521zm0-12.609a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 37.826a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zM64.304 25.217a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0-12.608a1.26 1.26 0 100 2.521 1.26 1.26 0 000-2.521zm0-12.609a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 37.826a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.609a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zM51.696 25.217a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0-12.608a1.26 1.26 0 100 2.521 1.26 1.26 0 000-2.521zm0-12.609a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 37.826a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.609a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.608a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zM39.087 25.217a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0-12.608a1.26 1.26 0 100 2.521 1.26 1.26 0 000-2.521zm0-12.609a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 37.826a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.609a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.608a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.61a1.26 1.26 0 100 2.52 1.26 1.26 0 000-2.52zM26.478 25.216a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0-12.608a1.26 1.26 0 100 2.521 1.26 1.26 0 000-2.521zm0-12.609a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 37.826a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.609a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.608a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.61a1.26 1.26 0 100 2.52 1.26 1.26 0 000-2.52zm0 12.608a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zM13.87 25.217a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0-12.608a1.26 1.26 0 100 2.521 1.26 1.26 0 000-2.521zM13.87 0a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 37.826a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.609a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.608a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.61a1.26 1.26 0 100 2.52 1.26 1.26 0 000-2.52zm0 12.608a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.609a1.26 1.26 0 100 2.521 1.26 1.26 0 000-2.521zM1.26 25.217a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0-12.608a1.26 1.26 0 100 2.521 1.26 1.26 0 000-2.521zM1.26 0a1.26 1.26 0 100 2.522A1.26 1.26 0 001.26 0zm0 37.826a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.609a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.608a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.61a1.26 1.26 0 100 2.52 1.26 1.26 0 000-2.52zm0 12.608a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522zm0 12.609a1.26 1.26 0 100 2.521 1.26 1.26 0 000-2.521zm0 12.608a1.26 1.26 0 100 2.522 1.26 1.26 0 000-2.522z"
							fill="currentColor"
							fillRule="evenodd"
						/>
					</svg>
				</div>
				<div className="absolute top-0 left-0 pt-24 pl-14" />
				<div className="absolute bottom-0 right-0 pb-20 pr-6">
					<svg className="block h-auto text-twitch opacity-60" viewBox="0 0 116 116" xmlns="http://www.w3.org/2000/svg" style={{ width: '20rem' }}>
						<path
							d="M1.26 116a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm12.61-12.609a1.26 1.26 0 100-2.521 1.26 1.26 0 000 2.521zm0 12.609a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm12.608 0a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.609a1.26 1.26 0 100-2.521 1.26 1.26 0 000 2.521zm0-12.608a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm12.609 0a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0 12.608a1.26 1.26 0 100-2.521 1.26 1.26 0 000 2.521zm0 12.609a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-37.826a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm12.609 12.609a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0 12.608a1.26 1.26 0 100-2.521 1.26 1.26 0 000 2.521zm0 12.609a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-37.826a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.609a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm12.608 25.218a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0 12.608a1.26 1.26 0 100-2.521 1.26 1.26 0 000 2.521zm0 12.609a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-37.826a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.609a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.608a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm12.609 37.826a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0 12.608a1.26 1.26 0 100-2.521 1.26 1.26 0 000 2.521zm0 12.609a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-37.826a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.609a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.608a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.61a1.26 1.26 0 100-2.52 1.26 1.26 0 000 2.52zm12.609 50.436a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0 12.608a1.26 1.26 0 100-2.521 1.26 1.26 0 000 2.521zm0 12.609a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-37.826a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.609a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.608a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.61a1.26 1.26 0 100-2.52 1.26 1.26 0 000 2.52zm0-12.608a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm12.608 63.044a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0 12.608a1.26 1.26 0 100-2.521 1.26 1.26 0 000 2.521zm0 12.609a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-37.826a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.609a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.608a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.61a1.26 1.26 0 100-2.52 1.26 1.26 0 000 2.52zm0-12.608a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.609a1.26 1.26 0 100-2.521 1.26 1.26 0 000 2.521zm12.61 75.653a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0 12.608a1.26 1.26 0 100-2.521 1.26 1.26 0 000 2.521zm0 12.609a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-37.826a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.609a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.608a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.61a1.26 1.26 0 100-2.52 1.26 1.26 0 000 2.52zm0-12.608a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522zm0-12.609a1.26 1.26 0 100-2.521 1.26 1.26 0 000 2.521zm0-12.608a1.26 1.26 0 100-2.522 1.26 1.26 0 000 2.522z"
							fill="currentColor"
							fillRule="evenodd"
						/>
					</svg>
				</div>
			</div>
			<div className="w-full">
				<div className="flex items-center justify-center -mb-24 relative z-20">
					<div className="rounded-full relative">
						<img src={avatar_url} className="h-64 w-64 rounded-full" />
						<p className="absolute bottom-0 inset-x-0 bg-[#1f1f23] text-center font-medium text-[#dedee3] text-3xl">{display_name}</p>
						<div className="absolute bottom-6 right-8 rounded-full w-6 h-6" style={{ background: 'radial-gradient(circle at 50% 15%, hsla(264, 83%, 69%,1), hsla(264, 83%, 34%, 1))', boxShadow: '0 0 2px 1px hsla(264, 83%, 69%, .5), 0 0 12px 0 hsla(264, 83%, 34%, 1), 0 0 24px 0 hsla(264, 83%, 34%, 1)' }} />
					</div>
				</div>
				<div className="relative pt-24 pb-16 px-6 w-full bg-[#1f1f23]">
					<div className="mt-6 text-7xl leading-normal text-[#F0F0FF] text-center text-bold">{title}</div>
				</div>
			</div>
		</div>
	)
}

export const getServerSideProps = async ({ params: { handle } }) => {
	if (!handle) return { notFound: true }

	try {
		return { props: { stream: await Twitch.getStreamer(handle) } }
	} catch (error) {
		return { notFound: true }
	}
}

export default Meta
